{"is_source_file": true, "format": "JavaScript", "description": "This file `NotesService.js` provides services for managing notes, including CRUD operations. It supports two modes: localStorage-based storage and REST API interactions, determined by environment configuration. It also includes utility functions for handling note data, such as normalization of tags and fuzzy searching notes.", "external_files": [], "external_methods": ["localStorage.getItem", "localStorage.setItem", "fetch", "crypto.randomUUID", "Date.now"], "published": ["normalizeTags", "searchNotes", "getNotesService"], "classes": [{"name": "LocalStorageNotesService", "description": "Handles notes storage and operations using browser's localStorage API."}, {"name": "RestNotesService", "description": "Handles notes storage and operations via REST API endpoints."}], "methods": [{"name": "normalizeTags(tags)", "description": "Normalizes and deduplicates an array of tags or tags string.", "scope": "", "scopeKind": ""}, {"name": "searchNotes(notes, query = \"\", filterTags = [])", "description": "Performs a fuzzy search over notes based on query and tags.", "scope": "", "scopeKind": ""}, {"name": "getNotesService()", "description": "Factory function returning an instance of either LocalStorageNotesService or RestNotesService based on environment variable.", "scope": "", "scopeKind": ""}, {"name": "_fetch(path, options = {})", "scope": "RestNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "_readAll()", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "_writeAll(notes)", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "cryptoRandomId()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list()", "scope": "RestNotesService", "scopeKind": "class", "description": "unavailable"}], "calls": ["localStorage.getItem", "localStorage.setItem", "fetch", "crypto.randomUUID", "Date.now"], "search-terms": ["NotesService", "localStorage", "REST API", "NotesService.js", "Notes structure", "Note CRUD", "tag normalization", "fuzzy search"], "state": 2, "file_id": 13, "knowledge_revision": 27, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^const API_BASE = process.env.REACT_APP_API_BASE;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LS_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^const LS_KEY = \"notes_app_items_v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LocalStorageNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^class LocalStorageNotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "RestNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^class RestNotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_fetch", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^  async _fetch(path, options = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(path, options = {})", "scope": "RestNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "_readAll", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^  _readAll() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "_writeAll", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^  _writeAll(notes) {$/", "language": "JavaScript", "kind": "method", "signature": "(notes)", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^    const body = {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^      content: note.content || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "toCreate", "scopeKind": "class"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^      createdAt: now,$/", "language": "JavaScript", "kind": "property", "scope": "toCreate", "scopeKind": "class"}, {"_type": "tag", "name": "cryptoRandomId", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^function cryptoRandomId() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^export function getNotesService() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^      id: cryptoRandomId(),$/", "language": "JavaScript", "kind": "property", "scope": "toCreate", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^  async get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^  async get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "RestNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^    const idx = items.findIndex((n) => n.id === id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "RestNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeTags", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^export function normalizeTags(tags) {$/", "language": "JavaScript", "kind": "function", "signature": "(tags)"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^    const now = Date.now();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^    return this._readAll().find((n) => n.id === id) || null;$/", "language": "JavaScript", "kind": "field", "scope": "LocalStorageNotesService", "scopeKind": "class"}, {"_type": "tag", "name": "remaining", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^    const remaining = items.filter((n) => n.id !== id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "searchNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^export function searchNotes(notes, query = \"\", filterTags = []) {$/", "language": "JavaScript", "kind": "function", "signature": "(notes, query = \"\", filterTags = [])"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^      tags: normalizeTags(note.tags || []),$/", "language": "JavaScript", "kind": "property", "scope": "toCreate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^      title: note.title || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "toCreate", "scopeKind": "class"}, {"_type": "tag", "name": "toCreate", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^    const toCreate = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^    const updated = {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-45511-45525/frontend_reactjs/src/services/NotesService.js", "pattern": "/^      updatedAt: now,$/", "language": "JavaScript", "kind": "property", "scope": "toCreate", "scopeKind": "class"}], "hash": "a14b5a70cfe0a58d22afac6be4ed79f7", "format-version": 4, "code-base-name": "frontend_reactjs", "filename": "frontend_reactjs/src/services/NotesService.js", "fields": [{"name": "content: note.content || \"\",", "scope": "toCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "createdAt: now,", "scope": "toCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "id: cryptoRandomId(),", "scope": "toCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(id) {", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "return this._readAll().find((n) => n.id === id) || null;", "scope": "LocalStorageNotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "tags: normalizeTags(note.tags || []),", "scope": "toCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "title: note.title || \"\",", "scope": "toCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "updatedAt: now,", "scope": "toCreate", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"27": ""}]}